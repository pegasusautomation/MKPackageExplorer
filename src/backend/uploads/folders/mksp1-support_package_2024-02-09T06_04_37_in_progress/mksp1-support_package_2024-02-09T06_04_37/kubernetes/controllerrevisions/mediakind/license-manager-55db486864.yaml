data:
  spec:
    template:
      $patch: replace
      metadata:
        creationTimestamp: null
        labels:
          app.kubernetes.io/component: license-manager
          app.kubernetes.io/instance: mkc
          app.kubernetes.io/managed-by: Helm
          app.kubernetes.io/name: license-manager
          app.kubernetes.io/part-of: mkc
          app.kubernetes.io/version: 0.94.2
          helm.sh/chart: license-manager-0.94.2
      spec:
        containers:
        - args:
          - -c
          - while true; do /usr/local/bin/envoy -c /etc/envoy/envoy_config.yaml; done
          command:
          - /bin/bash
          image: packages.mediakind.com/mpd-docker/envoyproxy/envoy:v1.18.3
          imagePullPolicy: IfNotPresent
          livenessProbe:
            failureThreshold: 3
            httpGet:
              path: /
              port: envoy-admin
              scheme: HTTP
            initialDelaySeconds: 30
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          name: license-manager-proxy
          ports:
          - containerPort: 5092
            hostPort: 5092
            name: envoy-proxy
            protocol: UDP
          - containerPort: 9901
            hostPort: 9901
            name: envoy-admin
            protocol: TCP
          readinessProbe:
            failureThreshold: 3
            httpGet:
              path: /ready
              port: envoy-admin
              scheme: HTTP
            initialDelaySeconds: 5
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          resources: {}
          securityContext:
            allowPrivilegeEscalation: false
            runAsUser: 2
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /etc/envoy/envoy_config.yaml
            name: config
            subPath: envoy_config.yaml
          - mountPath: /etc/envoy/runtime-config
            name: envoy-config
        - args:
          - /src/ericsson/license/api/app.py
          - --conf
          - /opt/ericsson/license-manager/etc/license-manager.ini
          - --log
          - /opt/ericsson/license-manager/etc/logging.json
          image: packages.mediakind.com/mpd-docker/mediakind/license-manager-api:0.94.2
          imagePullPolicy: IfNotPresent
          livenessProbe:
            failureThreshold: 3
            httpGet:
              path: /api/liveness
              port: restapi
              scheme: HTTP
            initialDelaySeconds: 30
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 3
          name: license-manager-api
          ports:
          - containerPort: 8097
            hostPort: 8097
            name: restapi
            protocol: TCP
          readinessProbe:
            failureThreshold: 3
            httpGet:
              path: /api/readiness
              port: restapi
              scheme: HTTP
            initialDelaySeconds: 20
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 3
          resources: {}
          securityContext:
            allowPrivilegeEscalation: true
            privileged: true
            runAsGroup: 0
            runAsUser: 0
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /opt/ericsson/license-manager/etc/envoy-config
            name: envoy-config
          - mountPath: /opt/ericsson/license-manager/etc/envoy-template/cds_template.yaml
            name: config
            subPath: cds_template.yaml
          - mountPath: /opt/ericsson/license-manager/etc/license-manager.ini
            name: config
            subPath: license-manager.ini
          - mountPath: /opt/ericsson/license-manager/etc/logging.json
            name: config
            subPath: logging.json
        - image: packages.mediakind.com/mpd-docker/mediakind/license-manager-lserv:0.94.2
          imagePullPolicy: IfNotPresent
          name: license-manager-lserv
          ports:
          - containerPort: 5093
            hostPort: 5093
            name: lserv
            protocol: TCP
          readinessProbe:
            exec:
              command:
              - pgrep
              - lserv
            failureThreshold: 3
            initialDelaySeconds: 20
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 1
          resources: {}
          securityContext:
            allowPrivilegeEscalation: true
            privileged: true
            runAsGroup: 0
            runAsUser: 0
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /opt/ericsson/license-manager/bin/echoid.dat
            name: locking-code
            subPath: echoid.dat
        dnsPolicy: ClusterFirstWithHostNet
        enableServiceLinks: false
        hostNetwork: true
        initContainers:
        - args:
          - /src/ericsson/license/api/app.py
          - --conf
          - /opt/ericsson/license-manager/etc/license-manager.ini
          - --log
          - /opt/ericsson/license-manager/etc/logging.json
          - --init
          image: packages.mediakind.com/mpd-docker/mediakind/license-manager-api:0.94.2
          imagePullPolicy: IfNotPresent
          name: license-manager-init
          resources: {}
          securityContext:
            allowPrivilegeEscalation: false
            runAsUser: 2
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /opt/ericsson/license-manager/etc/envoy-config
            name: envoy-config
          - mountPath: /opt/ericsson/license-manager/etc/envoy-template/cds_template.yaml
            name: config
            subPath: cds_template.yaml
          - mountPath: /opt/ericsson/license-manager/etc/envoy-template/lds_template.yaml
            name: config
            subPath: lds_template.yaml
          - mountPath: /opt/ericsson/license-manager/etc/license-manager.ini
            name: config
            subPath: license-manager.ini
          - mountPath: /opt/ericsson/license-manager/etc/logging.json
            name: config
            subPath: logging.json
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext:
          fsGroup: 2
        terminationGracePeriodSeconds: 30
        volumes:
        - emptyDir: {}
          name: probe-volume
        - emptyDir: {}
          name: envoy-config
        - configMap:
            defaultMode: 420
            name: license-manager-config
          name: config
        - configMap:
            defaultMode: 420
            name: license-manager-locking
          name: locking-code
metadata:
  annotations:
    meta.helm.sh/release-name: mkc
    meta.helm.sh/release-namespace: mediakind
  creationTimestamp: '2023-12-14T10:09:17Z'
  labels:
    app.kubernetes.io/component: license-manager
    app.kubernetes.io/instance: mkc
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: license-manager
    app.kubernetes.io/part-of: mkc
    app.kubernetes.io/version: 0.94.2
    controller.kubernetes.io/hash: 55db486864
    helm.sh/chart: license-manager-0.94.2
  managedFields:
  - apiVersion: apps/v1
    fieldsType: FieldsV1
    fieldsV1:
      f:data: {}
      f:metadata:
        f:annotations:
          .: {}
          f:meta.helm.sh/release-name: {}
          f:meta.helm.sh/release-namespace: {}
        f:labels:
          .: {}
          f:app.kubernetes.io/component: {}
          f:app.kubernetes.io/instance: {}
          f:app.kubernetes.io/managed-by: {}
          f:app.kubernetes.io/name: {}
          f:app.kubernetes.io/part-of: {}
          f:app.kubernetes.io/version: {}
          f:controller.kubernetes.io/hash: {}
          f:helm.sh/chart: {}
        f:ownerReferences:
          .: {}
          k:{"uid":"b597636d-e167-4b13-bf2f-ef155c260a0b"}: {}
      f:revision: {}
    manager: k3s
    operation: Update
    time: '2023-12-14T10:09:17Z'
  name: license-manager-55db486864
  namespace: mediakind
  ownerReferences:
  - apiVersion: apps/v1
    blockOwnerDeletion: true
    controller: true
    kind: StatefulSet
    name: license-manager
    uid: b597636d-e167-4b13-bf2f-ef155c260a0b
  resourceVersion: '18954'
  uid: 5be3cc68-d2fc-4289-977b-3ef729eb67ff
revision: 1
