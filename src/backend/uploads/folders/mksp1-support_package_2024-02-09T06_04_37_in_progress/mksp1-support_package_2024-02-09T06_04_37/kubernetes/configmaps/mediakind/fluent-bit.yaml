data:
  custom_parsers.conf: "[PARSER]\n    Name                  cri_no_time\n    Format\
    \                regex\n    Regex                 ^(?<time>[^ ]+) (?<stream>stdout|stderr)\
    \ ([^ ]*) (?<log_msg>.*)$\n    Time_Key              time\n    Time_Format   \
    \        %Y-%m-%dT%H:%M:%S.%L%z\n    Decode_Field_as       json log_msg\n\n[PARSER]\n\
    \    Name                  stdout\n    Format                regex\n    Regex\
    \                 ^(?<log_msg>.*)$\n    Time_Key              time\n    Time_Format\
    \           %Y-%m-%dT%H:%M:%S.%L%z\n    Time_Keep             On\n\n[PARSER]\n\
    \    Name                  systemd\n    Format                regex\n    Regex\
    \                 ^time=\"(?<time>[^ ]*)\" level=(?<level>[^ ]*) msg=\"(?<msg>[^\"\
    ]*)\"(?<extra_log>.*)\n    Time_Keep             On\n"
  fluent-bit.conf: "[SERVICE]\n    Daemon Off\n    Flush 1\n    Log_Level error\n\
    \    Parsers_File parsers.conf\n    Parsers_File custom_parsers.conf\n    HTTP_Server\
    \ On\n    HTTP_Listen 0.0.0.0\n    HTTP_Port 2020\n    Health_Check On\n\n[INPUT]\n\
    \    Name                tail\n    Path                /var/log/containers/*.log\n\
    \    Parser              cri_no_time\n    Tag                 mk.<ms_name>.<container_name>.log\n\
    \    Tag_Regex           (?<ms_name>([-a-z0-9]*?))-(?<pod_ext>(([a-z0-9]*-)?[a-z0-9]{5})|(0))_(?<namespace_name>[^_]+)_(?<container_name>.+)-\n\
    \    Refresh_Interval    5\n    DB                  /var/log/kube-logs.db\n  \
    \  Mem_Buf_Limit       5MB\n    Skip_Long_Lines     Off\n    Exclude_Path    \
    \    *solution-manager-transcode*.log,*ce1-controller-*.log,*aks-ssh*.log,*svclb*.log,*cert-manager*.log,*coredns*.log,*fluent-bit*.log\n\
    [INPUT]\n    Name                systemd\n    Tag                 systemd\n  \
    \  DB                  /var/log/systemd.db\n    Max_Entries         1001\n\n[FILTER]\n\
    \    Name                       modify\n    Match                      *\n   \
    \ Rename                     log           msg\n    Rename                   \
    \  message       msg\n    # In kibana, field '@timestamp' is used whereas this\
    \ field already exists in elasticsearch. Conflict !!\n    Rename             \
    \        @timestamp   timestamp\n    Remove                     stream\n# Systemd\
    \ filters to keep log entries consistent\n[FILTER]\n    Name                 \
    \      parser\n    Match                      systemd\n    Key_Name          \
    \         MESSAGE\n    Parser                     systemd\n    Reserve_Data  \
    \             On\n[FILTER]\n    Name                       modify\n    Match \
    \                     systemd\n    Rename                     SYSLOG_IDENTIFIER\
    \  syslog_identifier\n    Rename                     MESSAGE  msg\n    Rename\
    \                     _HOSTNAME  hostname\n    Rename                     _SYSTEMD_UNIT\
    \  systemd_unit\n[FILTER]\n    Name                       lua\n    Match     \
    \                 systemd\n    Script                     /fluent-bit/scripts/script_systemd.lua\n\
    \    Call                       insert_time\n[FILTER]\n    Name              \
    \         lua\n    Match                      mk*.etcd-init-operations.log\n \
    \   Script                     /fluent-bit/scripts/script_3pp.lua\n    Call  \
    \                     pre_process\n[FILTER]\n    Name                       modify\n\
    \    Match                      mk.etcd*.log\n    Add                        pname\
    \ etcd\n[FILTER]\n    Name                       lua\n    Match              \
    \        mk.keepalived.keepalived.log\n    Script                     /fluent-bit/scripts/script_3pp.lua\n\
    \    Call                       pre_process\n[FILTER]\n    Name              \
    \         modify\n    Match                      mk.keepalived.keepalived.log\n\
    \    Add                        pname keepalived\n[FILTER]\n    Name         \
    \              nest\n    Match                      mk.*\n    Operation      \
    \            lift\n    Nested_under               log_msg\n[FILTER]\n    # To\
    \ ensure that applications do not fill up the files very quickly (on error for\
    \ example)\n    # which would end up losing old entries.\n    # This will pass\
    \ 1000 messages per second in average over 300 seconds (safety limit now)\n  \
    \  Name                       throttle\n    Match                      *\n   \
    \ Rate                       1000\n    Window                     300\n    Interval\
    \                   1s\n[FILTER]\n    Name                       modify\n    Match\
    \                      systemd\n    Remove                     SYSLOG_FACILITY\n\
    \    Remove                     SYSLOG_PID\n    Remove                     CODE_FILE\n\
    \    Remove                     CODE_FUNCTION\n    Remove                    \
    \ CODE_LINE\n    Remove                     LEADER\n    Remove               \
    \      MESSAGE_ID\n    Remove                     SESSION_ID\n    Remove     \
    \                USER_ID\n    Remove                     RESULT\n    Remove  \
    \                   CONFIG_FILE\n    Remove                     CONFIG_LINE\n\
    \    Remove                     ERRNO\n    Remove                     INITRD_USEC\n\
    \    Remove                     KERNEL_USEC\n    Remove                     USERSPACE_USEC\n\
    \    Rename                     SYSLOG_IDENTIFIER  syslog_identifier\n    Rename\
    \                     PRIORITY  priority\n    Rename                     MESSAGE\
    \  message\n    Rename                     _HOSTNAME  hostname\n    Rename   \
    \                  _SYSTEMD_UNIT  systemd_unit\n    Rename                   \
    \  UNIT  unit\n    Remove_wildcard            _\n\n[OUTPUT]\n    Name        \
    \               file\n    Match                      mk.*\n    Format        \
    \             plain\n    Path                       /var/log/mediakind/kubernetes\n\
    [OUTPUT]\n    Name                       file\n    Match                     \
    \ systemd\n    Format                     plain\n    Path                    \
    \   /var/log/mediakind/systemd\n"
metadata:
  annotations:
    meta.helm.sh/release-name: fluent-bit
    meta.helm.sh/release-namespace: mediakind
  creationTimestamp: '2023-12-14T06:51:34Z'
  labels:
    app.kubernetes.io/instance: fluent-bit
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: fluent-bit
    app.kubernetes.io/version: 1.8.11
    helm.sh/chart: fluent-bit-0.19.10
  managedFields:
  - apiVersion: v1
    fieldsType: FieldsV1
    fieldsV1:
      f:data:
        .: {}
        f:custom_parsers.conf: {}
        f:fluent-bit.conf: {}
      f:metadata:
        f:annotations:
          .: {}
          f:meta.helm.sh/release-name: {}
          f:meta.helm.sh/release-namespace: {}
        f:labels:
          .: {}
          f:app.kubernetes.io/instance: {}
          f:app.kubernetes.io/managed-by: {}
          f:app.kubernetes.io/name: {}
          f:app.kubernetes.io/version: {}
          f:helm.sh/chart: {}
    manager: helm
    operation: Update
    time: '2023-12-14T06:51:34Z'
  name: fluent-bit
  namespace: mediakind
  resourceVersion: '603'
  uid: 31a06b40-3e0b-4c99-8a44-2dc5d0ebb728
